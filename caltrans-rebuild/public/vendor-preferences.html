<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendor Preferences - CaltransBizConnect</title>
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/design-system.css">
    <link rel="stylesheet" href="css/dashboard-new.css">
    <link rel="stylesheet" href="css/dashboard-common.css">
    <style>
        .hero-section {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-light) 100%);
            color: white;
            padding: var(--space-2xl) var(--space-xl);
            border-radius: var(--border-radius-lg);
            margin-bottom: var(--space-xl);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="rgba(255,255,255,0.1)"/><stop offset="100%" stop-color="rgba(255,255,255,0)"/></linearGradient></defs><rect width="100" height="100" fill="url(%23grad)"/></svg>');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.3;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-welcome h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: var(--space-sm);
            line-height: 1.1;
        }

        .hero-welcome p {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 600px;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .hero-welcome h1 {
                font-size: 2rem;
            }
            
            .hero-welcome p {
                font-size: 1rem;
            }
        }
    </style>
</head>

<body class="dashboard-v2">
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <aside class="sidebar" id="sidebar"></aside>

    <div class="dashboard-container">
        <header class="header-top" id="header-top"></header>

        <!-- Main Content -->
        <main id="main-content" class="main-content">

            <!-- Hero Section -->
            <section class="hero-section">
                <div class="hero-content">
                    <div class="hero-welcome">
                        <h1>Vendor Preferences</h1>
                        <p>Customize your opportunity matching preferences and notification settings.</p>
                    </div>
                </div>
            </section>

            <!-- Preferences Form -->
            <section class="content-card">
                <h3>Matching Preferences</h3>
                <form id="preferencesForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="workCategories">Work Categories</label>
                            <select id="workCategories" name="workCategories" multiple class="form-control">
                                <option value="construction">Construction</option>
                                <option value="engineering">Engineering</option>
                                <option value="consulting">Consulting</option>
                                <option value="supplies">Supplies & Materials</option>
                                <option value="services">Professional Services</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="districts">Preferred Districts</label>
                            <select id="districts" name="districts" multiple class="form-control">
                                <option value="1">District 1 (Eureka)</option>
                                <option value="2">District 2 (Redding)</option>
                                <option value="3">District 3 (Marysville)</option>
                                <option value="4">District 4 (Bay Area)</option>
                                <option value="5">District 5 (San Luis Obispo)</option>
                                <option value="6">District 6 (Fresno)</option>
                                <option value="7">District 7 (Los Angeles)</option>
                                <option value="8">District 8 (San Bernardino)</option>
                                <option value="9">District 9 (Bishop)</option>
                                <option value="10">District 10 (Stockton)</option>
                                <option value="11">District 11 (San Diego)</option>
                                <option value="12">District 12 (Orange County)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="projectSize">Preferred Project Size</label>
                        <select id="projectSize" name="projectSize" class="form-control">
                            <option value="">All Sizes</option>
                            <option value="small">Small (< $100K)</option>
                            <option value="medium">Medium ($100K - $500K)</option>
                            <option value="large">Large (> $500K)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="emailNotifications" name="emailNotifications">
                            <span class="checkmark"></span>
                            Email notifications for matching opportunities
                        </label>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="weeklyDigest" name="weeklyDigest">
                            <span class="checkmark"></span>
                            Weekly digest of new opportunities
                        </label>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="smsAlerts" name="smsAlerts">
                            <span class="checkmark"></span>
                            SMS alerts for urgent opportunities
                        </label>
                    </div>

                    <div style="display: flex; gap: var(--space-md); margin-top: var(--space-xl); justify-content: flex-end;">
                        <button type="button" class="btn btn-outline" onclick="resetForm()">Reset</button>
                        <button type="submit" class="btn btn-primary">Save Preferences</button>
                    </div>
                </form>
            </section>

        </main>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/main.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/components/navigation.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                Navigation.init('vendor');
                loadPreferences();
            }, 50);
        });

        function loadPreferences() {
            const user = JSON.parse(localStorage.getItem('caltrans_user'));
            if (!user) return;

            // Load existing preferences
            const prefs = user.preferences || {};
            
            document.getElementById('emailNotifications').checked = prefs.email_notifications || false;
            document.getElementById('weeklyDigest').checked = prefs.weekly_digest || false;
            document.getElementById('smsAlerts').checked = prefs.sms_alerts || false;

            // Handle form submission
            document.getElementById('preferencesForm').addEventListener('submit', handleSubmit);
        }

        function handleSubmit(e) {
            e.preventDefault();

            const formData = new FormData(e.target);
            const preferences = {
                work_categories: formData.getAll('workCategories'),
                districts: formData.getAll('districts'),
                project_size: formData.get('projectSize'),
                email_notifications: formData.get('emailNotifications') === 'on',
                weekly_digest: formData.get('weeklyDigest') === 'on',
                sms_alerts: formData.get('smsAlerts') === 'on'
            };

            // Update user preferences
            const user = JSON.parse(localStorage.getItem('caltrans_user'));
            user.preferences = preferences;
            localStorage.setItem('caltrans_user', JSON.stringify(user));

            alert('Preferences saved successfully!');
        }

        function resetForm() {
            document.getElementById('preferencesForm').reset();
        }
    </script>

</body>

</html>
